geometry :
  nemo variables:
    - name: seaIceFraction
      nemo field name: iiceconc
      model space: surface
    - name: sea_surface_foundation_temperature
      nemo field name: votemper
      model space: surface
    - name: waterPotentialTemperature
      nemo field name: votemper
      model space: volume
    - name: seaIceFractionBackgroundError
      nemo field name: seaice_tot_var
      model space: surface
      variable type: background variance
  grid name: eORCA12_T
  number levels: 2
state :
  date: 2021-06-29T21:00:00Z
  state variables: [ seaIceFraction, seaIceFractionBackgroundError ]
  nemo field file: /data/users/tsearle/jopa_ostia_start_data/ops_bg_full.nc
  variance field file: /data/users/tsearle/jopa_ostia_start_data/ops_bgerr_ostia_orca12ext.nc
window begin: 2021-06-29T21:00:00Z
window length: P1D
observations:
- obs space:
    name: Sea Ice
    obsdatain:
      engine:
        type: ODB
        obsfile: /data/users/tsearle/jopa_ostia_start_data/seaice.odb
        mapping file: ioda/test/testinput/odb_default_name_map.yml
        query file: ioda/test/testinput/iodatest_odb_seaice.yml
    obsdataout:
      engine:
        type: H5File
        obsfile: test_out.nc
    simulated variables: [seaIceFraction]
  get values:
    atlas-interpolator:
      type: finite-element
      non_linear: missing-if-all-missing
      max_fraction_elems_to_try: 0.0
  obs operator:
    name: Composite
    components:
    - name: Identity
    - name: BackgroundErrorIdentity
  obs filters:
  - filter: Bayesian Background Check
    filter variables:
    - name: seaIceFraction
    prob density bad obs: 1.0
    initial prob gross error: 0.04
    PGE threshold: 0.5
  - filter: NEMO Feedback Writer
    filename: test_hofx_feedback_writer_out.nc
    variables:
    - name: seaIceFraction
      nemo name: ICECONC
      long name: ice area fraction
      units: Fraction
      additional variables:
      - name: seaIceFraction
        feedback suffix: Hx
        ioda group: HofX
